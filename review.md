# PHP App ② レビュー

## XSS(クロスサイトスクリプティング)

### XSSとはどんな攻撃か、また攻撃者にどんなメリットがあるか説明してください。
- 攻撃者がウェブページに悪意のあるスクリプトを挿入し、ユーザーがそのスクリプトを実行する攻撃手法です。
　また、メリットは被害者のクッキーやセッションIDを盗むことで、アカウント乗っ取りなどの悪用を行う。

### `htmlspecialchars()`を`e()`として定義しなおすメリットを説明してください。
- コードが簡潔になり、可読性が向上するため。

### `htmlspecialchars()`を使うことでなぜXSSが防げるのか説明してください。
- htmlspecialchars()はHTMLの特殊文字（<, >, &, " など）をエスケープ処理し、
　ブラウザ側がこれらをタグではなく、ただの文字列として扱われるようになるため、
　XSS攻撃を防ぐことができます。

## CSRF(クロスサイトリクエストフォージェリ)

### CSRFとはどんな攻撃か、また攻撃者にどんなメリットがあるか説明してください。
- ユーザーが意図せずに攻撃者の作成したリクエストを送信してしまう攻撃です。
  ユーザーが既にログインしているウェブサイトに対して、不正なアクセスを実行させることができます。
　メリットは被害者のユーザー認証情報を悪用して操作を行えることです。また、ユーザーの権限を利用して不正な操作が行えるため、攻撃が成功したしやすい。

### SessionとCookieの違いを説明してください。
- Session: サーバー側で管理されるデータで、個々のユーザーに固有の情報を保存します。
- Cookie:  ブラウザ側に保存されるデータで。サーバーからクライアントに送られ、後に再びサーバーに送信されることで、ユーザーの情報を保持する。

### `setToken()`が何をしているか説明してください。
- CSRF対策のために一意のトークンを生成し、そのトークンをセッションやフォームに保存します。
  これにより、リクエスト送信時にそのトークンが含まれるかを確認するために使用します。

### `checkToken()`が何をしているか説明してください。
- checkToken()は、リクエストで送信されたトークンと、セッションに保存されたトークンを比較し、一致するかどうかを確認します。
 トークンが一致しない場合、不正なリクエストと見なし、処理を中断します。

### トークンを使うことでなぜCSRFが防げるのか説明してください。
- CSRF攻撃では、攻撃者が被害者に対して偽のリクエストを送信させますが、トークンを用いることで、サーバー側はリクエストが正当なユーザーからのものか確認できます。
  攻撃者はこのトークンを知ることができないため、偽のリクエストを防止できます。

## SQLインジェクション

### SQLインジェクションとはどんな攻撃か、また攻撃者にどんなメリットがあるか説明してください。
- 攻撃者がSQLクエリを不正に操作し、データベースに対して意図しない命令を実行させる攻撃です。
  入力がSQL文に直接組み込まれることで、攻撃者はデータの閲覧、改ざん、削除などが可能になります。

### `->prepare()`の返り値と、またこのメソッドが何をしているか説明してください。
- 返り値は、PDOStatementオブジェクトです。
  SQL文をプレースホルダで準備し、サーバーに送信することで、SQLインジェクションを防ぎます。

### `->bindValue()`が何をしているか説明してください。
- プレースホルダに対して実際の値をバインドします。これにより、
  ユーザー入力がSQL文に直接含まれるのではなく、安全に値が置き換えられます。
 

### 今回の対策でなぜSQLインジェクションが防げるのか説明してください。
- プレースホルダと->bindValue()を使うことで、SQL文とユーザー入力が分離されます。
  これにより、悪意のある入力がSQL文として解釈されることを防ぎ、
　SQLインジェクション攻撃を防ぐことができます。

## バリデーション

### バリデーションの目的について説明してください。
- ユーザーからの入力が正しい形式であることを確認し、
  不正なデータがシステムに取り込まれるのを防ぐことです。

### `validate()`が何をしているか説明してください。
- ユーザーから送信されたデータが指定したルールに従っているかをチェックしています。

### `isset($post['content'])`はなぜ必要か、無い場合どうなるか説明してください。
- フォームから送信されたデータが存在するかを確認するために必要です。
  このチェックがない場合、空のデータが処理され、エラーが発生する可能性があります。

## その他

### `unsetError()`を実行しないとどうなるか説明してください。
- unsetError()はエラーステータスをクリアするための関数で、
  この関数を実行しないと、以前のエラー情報が残ったままとなり、
　次回のリクエスト時にもエラーメッセージは表示されてしまう可能性がある。